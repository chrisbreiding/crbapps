(function(){define(function(){return{indexOf:function(t){var i,n,e,r,s;for(s=this.props[this.listName],i=e=0,r=s.length;r>e;i=++e)if(n=s[i],n.id===t.id)return i;return-1},newId:function(){var t,i;return t=function(){var t,n,e,r;for(e=this.props[this.listName],r=[],t=0,n=e.length;n>t;t++)i=e[t],r.push(i.id);return r}.call(this),t.length?Math.max.apply(Math,t)+1:0},update:function(t){return this.replace(t,t)},remove:function(t){return this.replace(t)},replace:function(t,i){var n,e,r;return e=this.indexOf(t),e>-1?(n=[e,1],i&&n.push(i),(r=this.props[this.listName]).splice.apply(r,n),this.save()):void 0},save:function(){return this.props.onUpdate(this.props[this.listName])}}})}).call(this);