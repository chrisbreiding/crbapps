(function(){define(["calculation"],function(t){var e;return e=function(){function e(t,e){this.value=t,this.type=null!=e?e:"num"}return e.prototype.process=function(){var e,l,n,u;if(e=t.collection,l=t.result.type,u=this.value,n=this.type,"."===this.value){if(e.length>1&&/\./.test(e[e.length-1].value)&&"calc"!==l)return;l&&"calc"!==l||(u="0.",n="num")}return"calc"===l?e[0].value=u:l===n?u=e[e.length-1].value=e[e.length-1].value+u:e.push({value:u,type:n}),t.setResult(u,n)},e}()})}).call(this);